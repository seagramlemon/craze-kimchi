-- 계정 : crazekimchi
-- pw : coffeekimchi

/*
DROP TABLE PRODUCT_IMG;
DROP TABLE PRODUCT;
DROP TABLE NOTICE_IMG;
DROP TABLE NOTICE;
DROP TABLE MEMBER;
DROP SEQUENCE PRODUCT_IMG_SEQ;
DROP SEQUENCE PRODUCT_SEQ;
DROP SEQUENCE NOTICE_IMG_SEQ;
DROP SEQUENCE NOTICE_SEQ;
*/

CREATE TABLE MEMBER(
	MEMBER_ID			VARCHAR2(32)		PRIMARY KEY,
	MEMBER_PW			CHAR(60)			NOT NULL,
	MEMBER_NAME			VARCHAR2(32)		NOT NULL,
	MEMBER_EMAIL		VARCHAR2(64)		NOT NULL,
	ENROLL_DATE			DATE				DEFAULT SYSDATE NOT NULL,
	MEMBER_TYPE			NUMBER				DEFAULT 2 NOT NULL
);
CREATE TABLE NOTICE(
	NOTICE_NO			NUMBER				PRIMARY KEY,
	NOTICE_TITLE		VARCHAR2(256)		NOT NULL,
	NOTICE_CONTENT		VARCHAR2(4000)		NOT NULL,
	NOTICE_READ_COUNT	NUMBER				DEFAULT 0 NOT NULL,
	NOTICE_REG_DATE		DATE				DEFAULT SYSDATE NOT NULL,
	NOTICE_STATUS		NUMBER				DEFAULT 1 NOT NULL
);
CREATE SEQUENCE NOTICE_SEQ;
CREATE TABLE NOTICE_IMG(
	NOTICE_FILE_NO		NUMBER				PRIMARY KEY,
	NOTICE_FILE_IMG		VARCHAR2(64)		NOT NULL,
	NOTICE_NO			NUMBER				REFERENCES NOTICE
);
CREATE SEQUENCE NOTICE_IMG_SEQ;

CREATE TABLE PRODUCT(
	PRODUCT_NO			NUMBER				PRIMARY KEY,
	PRODUCT_NAME		VARCHAR2(64)		NOT NULL,
	PRICE				NUMBER				NOT NULL,
	DETAIL				VARCHAR2(4000)		NOT NULL,
	THUMBNAIL_IMG		VARCHAR2(64)		NOT NULL,
	AMOUNT				NUMBER				DEFAULT 0 NOT NULL,
	VIEW_COUNT			NUMBER				DEFAULT 0 NOT NULL,
	STATUS				CHAR(1)				DEFAULT 'Y' CHECK (STATUS IN ('Y','N')) NOT NULL		
);
CREATE SEQUENCE PRODUCT_SEQ;
CREATE TABLE PRODUCT_IMG(
	PRODUCT_IMG_NO		NUMBER				PRIMARY KEY,
	PRODUCT_NO			NUMBER				REFERENCES PRODUCT,
	PRODUCT_IMG_NAME	VARCHAR2(64)		NOT NULL
);
CREATE SEQUENCE PRODUCT_IMG_SEQ;

SELECT * FROM USER_TABLES;
SELECT * FROM USER_SEQUENCES;

-- 상품 썸네일이미지 경로 자료형 수정 (바이트)
alter table product modify thumbnail_img varchar2(128);
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kimchi.craze.notice.model.dao.NoticeMapper">
	<select id="selectNoticeList" resultType="notice">
		select 
		notice_no,
		notice_title,
		notice_read_count,
		to_char(notice_reg_date,'yyyy-mm-dd') as notice_reg_date,
		notice_status
		from notice order by 1 desc 
	</select>
	
	<update id="changeStatus">
		update notice set notice_status = #{noticeStatus} where notice_no=#{noticeNo}
	</update>
	<insert id="insertNotice">
		insert into notice values(notice_seq.nextval,#{noticeTitle},#{noticeContent},0,sysdate,1)
		<selectKey keyProperty="noticeNo" resultType="int" order="AFTER">
			select max(notice_no) from notice 
		</selectKey>
	</insert>
	<insert id="insertNoticeFile">
		insert into notice_img values(notice_img_seq.nextval,#{noticeFileImg},#{noticeNo})
	</insert>
	
</mapper>









